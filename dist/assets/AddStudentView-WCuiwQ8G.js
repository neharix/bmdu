import{C as E,ac as F,s as z,r as v,W as L,g as n,h,e,w as g,u,F as b,x as M,b as r,A as j,t as m,j as x,y as B,n as _}from"./index-CxU83Qru.js";import{_ as H}from"./TheBreadcrumb-DOlKxSwc.js";import{F as R,a as T}from"./vee-validate-9c6OnnXl.js";import{c as $,b as A}from"./index.esm-CwhLbS5k.js";const D={class:"w-full rounded-lg shadow-lg p-4 bg-white dark:bg-[#171131ef]"},N={class:"w-full flex"},U={class:"w-full"},O=["value"],G={class:"invalid-feedback select-none text-red-500 my-2 text-sm"},I={class:"mb-4"},P={key:0,class:"text-red-500 text-sm select-none"},W={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},q=["disabled"],J={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},te={__name:"AddStudentView",setup(K){const d=E(),a=F(),{highSchoolsResponse:y}=z(d),i=v(0),p=v(null),c=v(null),w=$().shape({high_school:A()}),k=s=>{p.value=s.target.files[0]};function C(){a.getForm(i.value,10).then(()=>{const s=new Blob([a.excelForm],{type:a.excelFormContentType});console.log(s);const t=URL.createObjectURL(s),l=document.createElement("a");l.href=t,l.target="_blank",l.download="form.xlsx",l.classList.add("hidden"),document.body.appendChild(l),l.click(),document.body.removeChild(l),a.resetExcelFormStates()})}const V=async s=>{if(p.value!==null){c.value=null;const t=new FormData;return t.append("excel",p.value),t.append("high_school_id",s.high_school),a.create(t).then(()=>{M.push("/students")}).catch(l=>{setErrors({apiError:l})})}else c.value="Excel faýlyny hökmän girizmeli"};L(()=>{d.getAll().then(()=>{d.highSchoolsResponse.length!=0&&(i.value=d.highSchoolsResponse[0].id)})});const S=[{path:"/students",name:"Talyplar"},{path:"/students/add",name:"Goşmak"}];return(s,t)=>(r(),n(b,null,[h(H,{paths:S}),e("div",D,[t[4]||(t[4]=e("h3",{class:"text-xl font-bold mx-2 select-none"},"Talyplary hasaba almak",-1)),h(u(T),{onSubmit:V,"validation-schema":u(w),"initial-values":{high_school:0},class:"space-y-4 my-4"},{default:g(({errors:l,isSubmitting:f,values:Q})=>[e("div",N,[e("div",U,[h(u(R),{as:"select",name:"high_school",id:"high_school",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),class:"w-full border border-gray-300 dark:border-gray-700 rounded-l-md p-2 focus:outline-none select-none"},{default:g(()=>[(r(!0),n(b,null,j(u(y),o=>(r(),n("option",{class:"text-gray-600 dark:bg-[#171131ef] dark:text-white select-none",value:o.id},m(o.name),9,O))),256))]),_:1},8,["modelValue"])]),e("div",null,[e("button",{onClick:C,class:"btn-active rounded-e-md h-full px-2 lg:px-6"},t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"w-6",version:"1.1",id:"Capa_1",viewBox:"0 0 26 26","xml:space":"preserve"},[e("g",null,[e("path",{fill:"currentColor",d:"M25.162,3H16v2.984h3.031v2.031H16V10h3v2h-3v2h3v2h-3v2h3v2h-3v3h9.162   C25.623,23,26,22.609,26,22.13V3.87C26,3.391,25.623,3,25.162,3z M24,20h-4v-2h4V20z M24,16h-4v-2h4V16z M24,12h-4v-2h4V12z M24,8   h-4V6h4V8z"}),e("path",{fill:"currentColor",d:"M0,2.889v20.223L15,26V0L0,2.889z M9.488,18.08l-1.745-3.299c-0.066-0.123-0.134-0.349-0.205-0.678   H7.511C7.478,14.258,7.4,14.494,7.277,14.81l-1.751,3.27H2.807l3.228-5.064L3.082,7.951h2.776l1.448,3.037   c0.113,0.24,0.214,0.525,0.304,0.854h0.028c0.057-0.198,0.163-0.492,0.318-0.883l1.61-3.009h2.542l-3.037,5.022l3.122,5.107   L9.488,18.08L9.488,18.08z"})])],-1)]))])]),e("div",G,m(l.high_school),1),e("div",null,[e("div",I,[t[3]||(t[3]=e("label",{for:"file",class:"block mb-1 select-none"},"Excel",-1)),e("input",{type:"file",id:"file",name:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:t[1]||(t[1]=o=>k(o)),class:"block w-full px-4 py-2 border-gray-300 dark:border-gray-600text-sm border rounded-md cursor-pointer bg-transparent focus:outline-none dark:placeholder-gray-400"},null,32),c.value?(r(),n("p",P,m(c.value),1)):x("",!0)])]),e("div",W,[e("button",{disabled:f,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50 select-none"},[h(B,{class:_({hidden:!f})},null,8,["class"]),e("span",{class:_({hidden:f})},"Hasaba al",2)],8,q)]),l.apiError?(r(),n("div",J,m(l.apiError),1)):x("",!0)]),_:1},8,["validation-schema"])])],64))}};export{te as default};
