import{_ as pe,p as Y,k as te,U as re,s as O,r as v,A,o as oe,b as a,f as s,h as P,g as l,d as r,t as c,w as Z,l as X,v as ye,F as _,B as z,T as me,n as d,C as he,E as xe,G as we,i as C,j as i,z as ee,c as U,H as _e,I as Ce,u as Me,x as $e}from"./index-DnGSU1Bb.js";import{_ as Le}from"./TheBreadcrumb-B0lWjjPw.js";import{u as Se,_ as Te}from"./useModalWindow-Bwp873Hd.js";import{u as Ae,T as ze}from"./useToast-DKLkbWQx.js";/* empty css                                                     */const Pe={class:"w-full rounded-lg shadow-lg"},Be={class:"pt-1 rounded-t-lg dark:bg-[#171131ef] bg-white"},De={class:"flex items-center justify-between space-x-2 py-3 px-4"},Re={class:"flex items-center"},je={id:"dropdown",class:"relative inline-block text-left"},Ge={class:"absolute left-0 z-10 mt-2 w-24 origin-top-left rounded-md bg-white dark:bg-[#171131ef] shadow-lg ring-1 ring-white dark:ring-gray-800 ring-opacity-5"},Ke={class:"py-1"},Ee=["value","onClick"],Ne={class:"lg:w-1/3 md:w-1/3 w-2/3 flex items-center space-x-2"},Ve=["disabled"],Ie={class:"w-full overflow-x-auto rounded-b-lg"},Oe={class:"w-full min-w-full table-auto bg-white dark:bg-[#171131ef]"},Ue={class:"bg-gray-200 dark:bg-[#211849ef]"},He={key:2,class:"border-y border-gray-300 dark:border-[#171131ef] p-3 select-none text-center text-[0.8rem]"},Fe={class:"border-y border-gray-300 dark:border-[#32237cef] px-4 py-2 break-words text-[0.8rem]"},qe={class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},Je={key:0,class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},Qe={key:1,class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},We={class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},Ye={class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},Ze={class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},Xe={key:2,class:"border-y border-gray-300 dark:border-[#32237cef] p-2 break-words text-[0.8rem]"},et={class:"w-full flex items-center justify-center"},tt={class:"inline-flex rounded-md shadow-xs",role:"group"},rt=["onClick"],ot=["onClick"],at=["onClick"],st={class:"flex justify-center items-center mt-4 space-x-2 overflow-x-auto"},nt={key:2,class:"px-2 select-none"},lt=["onClick"],dt=["onClick"],it={key:4,class:"px-2 select-none"},ut={class:"toast-container w-5/6 fixed top-25 md:top-auto md:bottom-5 right-5 md:w-1/4 flex flex-col-reverse space-y-2"},ct={__name:"DepartmentsDataTable",props:["data"],emits:["update"],setup(H,{emit:E}){const g=H,N=E;Y(g,(o,e)=>{p.value=o.data,L.value=[...p.value]});const{isModalOpen:M,openModal:$,header:V,context:F}=Se(),{toasts:y,addToast:k}=Ae(),m=te(),q=re(),{deleteStatus:J,updateStatus:B,createStatus:D}=O(q),p=v([]),L=v([]),R=v(null);g.data.length>0&&(p.value=g.data,L.value=[...p.value]);const I=v("p-4 py-2 my-2 rounded-full border-none dark:border-violet-500/50 border-1 bg-blue-500 dark:bg-violet-600 text-white"),j=v("p-4 py-2 my-2 rounded-full border-none bg-gray-200 dark:bg-[#261953]"),u=v("name"),b=v("asc"),n=v(1),S=v(10),ae=[10,20,50,100],G=v(""),K=v(!1),se=()=>{L.value=p.value.filter(o=>o.name.toLowerCase().includes(G.value.toLowerCase())),n.value=1,K.value=!0},ne=()=>{G.value="",L.value=[...p.value],n.value=1,K.value=!1},Q=A(()=>u.value?[...L.value].sort((o,e)=>o[u.value]<e[u.value]?b.value==="asc"?-1:1:o[u.value]>e[u.value]?b.value==="asc"?1:-1:0):p.value),le=A(()=>{const o=(n.value-1)*S.value;return Q.value.slice(o,o+S.value)}),f=A(()=>Math.ceil(Q.value.length/S.value)),h=o=>{o>=1&&o<=f.value&&(n.value=o)},de=o=>{S.value=parseInt(o,10),n.value=1,T.value=!1},ie=A(()=>{const o=Math.max(2,n.value-2);return Array.from({length:Math.max(0,n.value-o)},(e,t)=>o+t)}),ue=A(()=>{const o=Math.min(f.value-1,n.value+2);return Array.from({length:Math.max(0,o-n.value)},(e,t)=>n.value+t+1)}),x=o=>{u.value===o?b.value=b.value==="asc"?"desc":"asc":(u.value=o,b.value="asc")},T=v(!1);function ce(){T.value=!T.value}function ve(){T.value=!1}function be(o){o.target.closest("#dropdown")||ve()}function fe(o,e,t){$(o,e),R.value=t}function ge(){M.value=!1,R.value=null}function ke(){M.value=!1,q.delete(R.value).then(()=>{N("update")}),R.value=null}return Y(J,(o,e)=>{o&&(o==="success"?k("Kafedra üstünlikli ýok edildi","success"):o==="error"&&k("Ýok etme prosesinde ýalňyşlyk ýüze çykdy","error")),J.value=null}),oe(()=>{B.value&&(B.value==="success"?k("Kafedra üstünlikli üýtgedildi","success"):B.value==="error"&&k("Üýtgetme prosesinde ýalňyşlyk ýüze çykdy","error")),B.value=null,D.value&&(D.value==="success"?k("Kafedra üstünlikli hasaba alyndy","success"):D.value==="error"&&k("Hasaba alma prosesinde ýalňyşlyk ýüze çykdy","error")),D.value=null}),window.addEventListener("click",be),(o,e)=>(a(),s(_,null,[P(Te,{"is-open":l(M),onClose:ge,onSubmit:ke,header:l(V),context:`"${l(F)}" ýok edilmegini tassyklaýarsyňyzmy?`},null,8,["is-open","header","context"]),r("div",Pe,[r("div",Be,[r("div",De,[r("div",Re,[r("div",je,[r("div",null,[r("button",{onClick:ce,type:"button",class:"inline-flex transition duration-200 ease-in w-full justify-center rounded-md border border-gray-300 dark:border-gray-800 bg-white dark:bg-[#171131ef] dark:text-gray-200 px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 dark:hover:bg-[#32237cef] focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-[#32237cef] focus:ring-offset-2 focus:ring-offset-gray-100 dark:focus:ring-offset-[#32237cef] select-none"}," Setir sany: "+c(S.value),1)]),P(me,{name:"fade-scale",onBeforeEnter:e[0]||(e[0]=t=>t.style.display="block"),onAfterLeave:e[1]||(e[1]=t=>t.style.display="none")},{default:Z(()=>[X(r("div",Ge,[r("div",Ke,[(a(),s(_,null,z(ae,t=>r("button",{key:t,value:t,onClick:w=>de(t),class:"w-full text-start text-gray-700 dark:text-gray-200 block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-[#32237cef] select-none"},c(t)+" setir ",9,Ee)),64))])],512),[[ye,T.value]])]),_:1})])]),r("div",Ne,[r("button",{onClick:ne,class:d([{"opacity-0":!K.value},"p-2 text-sm rounded-xl shadow-md border-none dark:border-violet-500/50 border-1 bg-blue-500 dark:bg-violet-600 text-white"]),disabled:!K.value},e[13]||(e[13]=[he('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="w-6 h-6" viewBox="0 0 24 24" version="1.1" data-v-205b9d10><title data-v-205b9d10>Reload</title><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" data-v-205b9d10><g id="Reload" data-v-205b9d10><rect id="Rectangle" fill-rule="nonzero" x="0" y="0" width="24" height="24" data-v-205b9d10></rect><path d="M4,13 C4,17.4183 7.58172,21 12,21 C16.4183,21 20,17.4183 20,13 C20,8.58172 16.4183,5 12,5 C10.4407,5 8.98566,5.44609 7.75543,6.21762" id="Path" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-205b9d10></path><path d="M9.2384,1.89795 L7.49856,5.83917 C7.27552,6.34441 7.50429,6.9348 8.00954,7.15784 L11.9508,8.89768" id="Path" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-205b9d10></path></g></g></svg>',1)]),10,Ve),X(r("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>G.value=t),type:"text",onKeyup:we(se,["enter"]),placeholder:"Gözleg",class:"w-full dark:text-gray-300 transition duration-200 ease-in bg-transparent px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:ring focus:ring-blue-200 focus:outline-none"},null,544),[[xe,G.value]])])])]),r("div",Ie,[r("table",Oe,[r("thead",Ue,[r("tr",null,[e[20]||(e[20]=r("th",{class:"border-y border-gray-300 dark:border-[#171131ef] p-3 select-none text-left text-[0.8rem]"}," T/B ",-1)),r("th",{class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[3]||(e[3]=t=>x("name"))},[e[14]||(e[14]=C(" KAFEDRA ")),r("span",{class:d([u.value==="name"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)]),!l(m).role==="root"?(a(),s("th",{key:0,class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[4]||(e[4]=t=>x("faculty"))},[e[15]||(e[15]=C(" FAKULTETI ")),r("span",{class:d([u.value==="faculty"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)])):i("",!0),!l(m).role==="root"?(a(),s("th",{key:1,class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[5]||(e[5]=t=>x("specializations_count"))},[e[16]||(e[16]=C(" HÜNÄR ")),r("span",{class:d([u.value==="specializations_count"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)])):i("",!0),r("th",{class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[6]||(e[6]=t=>x("students_count"))},[e[17]||(e[17]=C(" JEMI ")),r("span",{class:d([u.value==="students_count"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)]),r("th",{class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[7]||(e[7]=t=>x("male_count"))},[e[18]||(e[18]=C(" OGLAN ")),r("span",{class:d([u.value==="male_count"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)]),r("th",{class:"transition duration-200 ease-in border-y border-gray-300 dark:border-[#171131ef] dark:hover:bg-[#32237cef] p-3 select-none cursor-pointer hover:bg-gray-300 text-left text-[0.8rem]",onClick:e[8]||(e[8]=t=>x("female_count"))},[e[19]||(e[19]=C(" GYZ ")),r("span",{class:d([u.value==="female_count"?b.value==="asc"?"rotate-180":"":"opacity-50","ml-2 transition-transform duration-200 inline-block"])}," ▲ ",2)]),l(m).role==="root"?(a(),s("th",He," GURALLAR ")):i("",!0)])]),r("tbody",null,[(a(!0),s(_,null,z(le.value,(t,w)=>(a(),s("tr",{key:t.id,class:"transition ease-in hover:ease-out duration-200 hover:bg-gray-100 dark:hover:bg-[#261953]"},[r("td",Fe,c(w+1),1),r("td",qe,c(t.name),1),!l(m).role==="root"?(a(),s("td",Je,c(t.faculty),1)):i("",!0),!l(m).role==="root"?(a(),s("td",Qe,c(t.specializations_count),1)):i("",!0),r("td",We,c(t.students_count),1),r("td",Ye,c(t.male_count),1),r("td",Ze,c(t.female_count),1),l(m).role==="root"?(a(),s("td",Xe,[r("div",et,[r("div",tt,[(a(),s("button",{type:"button",key:t.id,onClick:W=>l(ee).push(`/departments/edit/${t.id}`),class:"px-4 py-2 text-[0.8rem] font-medium bg-emerald-400 hover:bg-emerald-500 transition ease-in hover:ease-out duration-200 text-white dark:bg-emerald-700 border border-gray-200 rounded-s-lg focus:z-10 focus:ring-2 focus:ring-emerald-500 dark:border-gray-700 select-none"}," Üýtgetmek ",8,rt)),(a(),s("button",{type:"button",key:t.id,onClick:W=>l(ee).push({name:"students-list",query:{department:t.id}}),class:"px-4 py-2 text-[0.8rem] font-medium bg-violet-400 hover:bg-violet-500 transition ease-in hover:ease-out duration-200 text-white dark:bg-violet-700 border border-gray-200 focus:z-10 focus:ring-2 focus:ring-violet-500 dark:border-gray-700 select-none"}," Görmek ",8,ot)),(a(),s("button",{type:"button",key:t.id,onClick:W=>fe("Ýok etmek",t.name,t.id),class:"px-4 py-2 text-[0.8rem] font-medium bg-red-400 hover:bg-red-500 transition ease-in hover:ease-out duration-200 text-white dark:bg-pink-900 dark:hover:bg-pink-600 border border-gray-200 rounded-e-lg focus:z-10 focus:ring-2 focus:ring-red-500 dark:border-gray-700 dark:focus:ring-pink-500 select-none"}," Pozmak ",8,at))])])])):i("",!0)]))),128))])])])]),r("div",st,[n.value!==1?(a(),s("button",{key:0,class:d(["select-none",I.value]),onClick:e[9]||(e[9]=t=>h(n.value-1))},e[21]||(e[21]=[r("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M13 8L9 12M9 12L13 16M9 12H21M19.4845 7C17.8699 4.58803 15.1204 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21C15.1204 21 17.8699 19.412 19.4845 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)):i("",!0),n.value>3?(a(),s("button",{key:1,class:d(["select-none",j.value]),onClick:e[10]||(e[10]=t=>h(1))}," 1 ",2)):i("",!0),n.value>4?(a(),s("span",nt,"...")):i("",!0),(a(!0),s(_,null,z(ie.value,t=>(a(),s("button",{class:d(["select-none",j.value]),key:"before-"+t,onClick:w=>h(t)},c(t),11,lt))),128)),f.value!==0?(a(),s("button",{key:3,class:d(["select-none",I.value])},c(n.value),3)):i("",!0),(a(!0),s(_,null,z(ue.value,t=>(a(),s("button",{class:d(["select-none",j.value]),key:"after-"+t,onClick:w=>h(t)},c(t),11,dt))),128)),n.value<f.value-3?(a(),s("span",it,"...")):i("",!0),n.value<f.value-2?(a(),s("button",{key:5,class:d(j.value),onClick:e[11]||(e[11]=t=>h(f.value))},c(f.value),3)):i("",!0),n.value!==f.value&&f.value!==0?(a(),s("button",{key:6,class:d(["select-none",I.value]),onClick:e[12]||(e[12]=t=>h(n.value+1))},e[22]||(e[22]=[r("svg",{class:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[r("path",{d:"M11 16L15 12M15 12L11 8M15 12H3M4.51555 17C6.13007 19.412 8.87958 21 12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C8.87958 3 6.13007 4.58803 4.51555 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2)):i("",!0)]),(a(),U(Ce,{to:"body"},[r("div",ut,[P(_e,{name:"toast"},{default:Z(()=>[(a(!0),s(_,null,z(l(y),t=>(a(),U(ze,{key:t.id,message:t.message,type:t.type,duration:t.duration,onClose:()=>y.value=l(y).filter(w=>w.id!==t.id)},null,8,["message","type","duration","onClose"]))),128))]),_:1})])]))],64))}},vt=pe(ct,[["__scopeId","data-v-205b9d10"]]),bt={class:"w-full"},ft={key:1,class:"flex w-full h-[58vh] items-center justify-center dark:bg-[#171131ef] bg-white rounded-lg border border-gray-200 dark:border-[#36314e]"},gt={key:2},xt={__name:"DepartmentsListView",setup(H){const E=te(),g=re(),{departmentsAdditional:N}=O(g),{role:M}=O(E),$=Me();oe(()=>{$.isLoading=!0,g.getAllAdditional().then(()=>{$.isLoading=!1})});const V=[{path:"/departments",name:"Kafedralar"},{path:"/departments/add",name:"Goşmak"}];return(F,y)=>(a(),s("div",bt,[l(M)==="root"?(a(),U(Le,{key:0,paths:V})):i("",!0),l($).isLoading?(a(),s("div",ft,[P($e,{class:"w-24"})])):(a(),s("div",gt,[P(vt,{data:l(N),onUpdate:y[0]||(y[0]=k=>l(g).getAllAdditional())},null,8,["data"])]))]))}};export{xt as default};
