import{G as E,ah as V,s as g,ai as C,k as N,r as R,a0 as O,b as o,f as u,d as e,h as f,w as T,g as d,F as _,E as D,t as l,n as x,y as j,j as v,c as S,L as H,M as P,u as M,D as q,C as A,aa as G,A as I}from"./index-DtGnqybP.js";import{_ as U}from"./TheBreadcrumb-CRCqceaG.js";import{c as J,b as K,a as W}from"./index.esm-CwhLbS5k.js";import{F as B,a as Y}from"./vee-validate-DJeF-XbW.js";import{u as Q,T as X}from"./useToast-BOmD7QC-.js";const Z={class:"tile my-8"},ee=["value"],ae={class:"invalid-feedback select-none text-red-500 my-2 text-sm"},te={class:"invalid-feedback select-none text-red-500 mb-2 mx-2 text-sm"},se={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},le=["disabled"],ne={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},oe={class:"toast-container w-5/6 fixed top-25 md:top-auto md:bottom-5 right-5 md:w-1/4 flex flex-col-reverse space-y-2"},ie={__name:"ExpulsionStatement",setup(F){const{toasts:r,addToast:k}=Q(),w=E(),h=V(),{expulsionReasons:y}=g(h),b=C(),{createStatus:s}=g(b),a=N(),{user:z}=g(a),m=R(0),t=J().shape({reason:K().required("Sebäp hökmän girizmeli"),detail:W().trim().required("Bellik, buýruk nomer,senesi hökmän görkezilmeli")});O(()=>{h.getAll().then(()=>{y.value.length>0&&(m.value=y.value[0].id)})});function L($,{setErrors:i}){const{reason:n,detail:c}=$;return b.create({student:w.params.id,sender:z.value.id,reason:n,detail:c}).then(()=>{s.value&&(s.value==="success"?k("Arza üstünlikli hasaba alyndy","success"):s.value==="error"&&k("Hasaba alma prosesinde ýalňyşlyk ýüze çykdy","error")),s.value=null}).catch(p=>i({apiError:p}))}return($,i)=>(o(),u(_,null,[e("div",Z,[i[3]||(i[3]=e("h3",{class:"text-xl font-bold mx-2 select-none"},"Talyby okuwdan boşatmak barada arza",-1)),f(d(Y),{onSubmit:L,"validation-schema":d(t),class:"space-y-4 my-4"},{default:T(({errors:n,isSubmitting:c})=>[e("div",null,[i[1]||(i[1]=e("label",{for:"region",class:"info-label"},"Okuwdan boşatmak sebäbi",-1)),f(d(B),{as:"select",name:"reason",id:"reason",class:"w-full border border-gray-300 dark:border-gray-700 rounded-md p-2 focus:outline-none select-none",modelValue:m.value,"onUpdate:modelValue":i[0]||(i[0]=p=>m.value=p)},{default:T(()=>[(o(!0),u(_,null,D(d(y),p=>(o(),u("option",{class:"text-gray-600 dark:bg-[#171131ef] dark:text-white select-none",value:p.id},l(p.name),9,ee))),256))]),_:1},8,["modelValue"]),e("div",ae,l(n.reason),1)]),e("div",null,[i[2]||(i[2]=e("label",{for:"detail",class:"info-label"},"Okuwdan boşatmak barada (Bellik, buýruk nomer,senesi hökmän görkezilmeli)",-1)),f(d(B),{as:"textarea",rows:"1",name:"detail",type:"text",id:"detail",class:x(["w-full dark:text-gray-300 bg-transparent px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:ring focus:ring-blue-200 focus:outline-none",{"is-invalid":n.detail}])},null,8,["class"]),e("div",te,l(n.detail),1)]),e("div",se,[e("button",{disabled:c,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50"},[f(j,{class:x({hidden:!c})},null,8,["class"]),e("span",{class:x({hidden:c})},"Okuwdan boşat",2)],8,le)]),n.apiError?(o(),u("div",ne,l(n.apiError),1)):v("",!0)]),_:1},8,["validation-schema"])]),(o(),S(P,{to:"body"},[e("div",oe,[f(H,{name:"toast"},{default:T(()=>[(o(!0),u(_,null,D(d(r),n=>(o(),S(X,{key:n.id,message:n.message,type:n.type,duration:n.duration,onClose:()=>r.value=d(r).filter(c=>c.id!==n.id)},null,8,["message","type","duration","onClose"]))),128))]),_:1})])]))],64))}},re={class:"tile"},de={class:"flex justify-between"},ue={class:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2"},ce={class:"info-content"},me={class:"info-content"},pe={class:"info-content"},fe={class:"info-content"},ye={class:"info-content"},be={class:"info-content"},ve={class:"info-content"},ge={class:"info-content"},ke={class:"info-content"},he={class:"info-content"},_e={class:"info-content"},xe={class:"info-content"},Se={class:"info-content"},we={class:"info-content"},ze={class:"info-content"},Te={class:"info-content"},$e={key:0},De={key:1},Be={class:"info-content"},Le={__name:"StudentInfoView",setup(F){const r=M(),k=N(),{user:w}=g(k),h=q(()=>{try{return!w.value.is_superuser}catch{return!1}}),y=E(),b=A(),{studentInfo:s}=g(b),a=G({fullName:"",highSchool:"",nationality:"",country:"",region:"",specialization:"",department:"",faculty:"",gender:"",familyStatus:"",paymentType:"",birthDate:"",admissionDate:"",registeredPlace:"",studyYear:"",phoneNumber:"",passport:"",militaryService:null,label:null});O(()=>{r.isLoading=!0,b.getInfo(y.params.id).then(()=>{if(s.value.active){switch(a.fullName=s.value.full_name,a.nationality=s.value.nationality.name,a.country=s.value.country.name,a.region=s.value.region.name,a.highSchool=s.value.high_school.name,a.faculty=s.value.specialization.faculty_department.high_school_faculty.faculty.name,a.department=s.value.specialization.faculty_department.department.name,a.specialization=`${s.value.specialization.specialization.name} (${s.value.specialization.specialization.degree.name} ${s.value.specialization.specialization.degree.duration} ýyl)`,a.registeredPlace=s.value.registered_place,a.phoneNumber=s.value.phone_number,a.passport=s.value.passport,s.value.gender){case"F":a.gender="Gyz";break;case"M":a.gender="Oglan";break}switch(s.value.payment_type){case"P":a.paymentType="Tölegli";break;case"B":a.paymentType="Býudjet";break}switch(s.value.family_status){case"FR":a.familyStatus="Hossarly";break;case"HO":a.familyStatus="Ýarym ýetim";break;case"CO":a.familyStatus="Doly ýetim";break;case"OE":a.familyStatus="Ýetimler öýünde ösen";break}s.value.label&&(a.label=s.value.label),s.value.military_service&&(a.militaryService=s.value.military_service);let m=new Date(s.value.birth_date);a.birthDate=m.toLocaleDateString();let t=new Date(s.value.admission_date);a.admissionDate=t.toLocaleDateString(),r.isLoading=!1}else r.isLoading=!1,I.push("/403")})});const z=[{path:"/students",name:"Talyplar"},{path:"/students/view",name:"Görmek",current:!0}];return(m,t)=>(o(),u(_,null,[f(U,{paths:z}),e("div",re,[e("div",de,[t[0]||(t[0]=e("h3",{class:"text-base md:text-xl font-bold mx-2 select-none"},"Talyp barada maglumat",-1)),d(r).isLoading?(o(),S(j,{key:0})):v("",!0)]),e("div",ue,[e("div",null,[t[1]||(t[1]=e("p",{class:"info-label"},"Talybyň ady, familiýasy, atasynyň ady",-1)),e("p",ce,l(a.fullName),1)]),e("div",null,[t[2]||(t[2]=e("p",{class:"info-label"},"Doglan senesi",-1)),e("p",me,l(a.birthDate),1)]),e("div",null,[t[3]||(t[3]=e("p",{class:"info-label"},"Jynsy",-1)),e("p",pe,l(a.gender),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"info-label"},"Milleti",-1)),e("p",fe,l(a.nationality),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"info-label"},"Ýurdy",-1)),e("p",ye,l(a.country),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"info-label"},"Ýazgyda duran salgysy",-1)),e("p",be,l(a.registeredPlace),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"info-label"},"Passport",-1)),e("p",ve,l(a.passport),1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"info-label"},"Telefon belgisi",-1)),e("p",ge,l(a.phoneNumber),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"info-label"},"Welaýaty",-1)),e("p",ke,l(a.region),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"info-label"},"Ýokary okuw mekdebi",-1)),e("p",he,l(a.highSchool),1)]),e("div",null,[t[11]||(t[11]=e("p",{class:"info-label"},"Fakulteti",-1)),e("p",_e,l(a.faculty),1)]),e("div",null,[t[12]||(t[12]=e("p",{class:"info-label"},"Kafedrasy",-1)),e("p",xe,l(a.department),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"info-label"},"Hünäri",-1)),e("p",Se,l(a.specialization),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"info-label"},"Okuwa giren senesi",-1)),e("p",we,l(a.admissionDate),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"info-label"},"Töleg görnüşi",-1)),e("p",ze,l(a.paymentType),1)]),e("div",null,[t[16]||(t[16]=e("p",{class:"info-label"},"Maşgala ýagdaýy",-1)),e("p",Te,l(a.familyStatus),1)]),a.gender==="Oglan"?(o(),u("div",$e,[t[17]||(t[17]=e("p",{class:"info-label"},"Harby borç",-1)),e("p",{class:x(["info-content",{"text-yellow-500 dark:text-amber-200":!a.militaryService}])},l(a.militaryService?a.militaryService:"Heniz harby borjyny ýerine ýetirmedik"),3)])):v("",!0),a.label?(o(),u("div",De,[t[18]||(t[18]=e("p",{class:"info-label"},"Bellik",-1)),e("p",Be,l(a.label),1)])):v("",!0)])]),h.value?(o(),S(ie,{key:0})):v("",!0)],64))}};export{Le as default};
