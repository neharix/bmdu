import{I as B,ad as H,s as b,ae as R,k as N,r as V,W as O,b as o,g as d,e,h as p,w,u as r,F as k,A as $,t as l,n as h,y as C,j as _,c as z,G as P,H as q,ac as A,a5 as G,x as I}from"./index-CxU83Qru.js";import{_ as M}from"./TheBreadcrumb-DOlKxSwc.js";import{c as L,b as W,a as J}from"./index.esm-CwhLbS5k.js";import{F as D,a as K}from"./vee-validate-9c6OnnXl.js";import{u as U,T as Y}from"./useToast-BD7xrvgK.js";const Q={class:"tile my-8"},X=["value"],Z={class:"invalid-feedback select-none text-red-500 my-2 text-sm"},ee={class:"invalid-feedback select-none text-red-500 mb-2 mx-2 text-sm"},ae={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},te=["disabled"],se={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},le={class:"toast-container w-5/6 fixed top-25 md:top-auto md:bottom-5 right-5 md:w-1/4 flex flex-col-reverse space-y-2"},ne={__name:"ExpulsionStatement",setup(E){const{toasts:f,addToast:v}=U(),x=B(),y=H(),{expulsionReasons:s}=b(y),a=R(),{createStatus:c}=b(a),g=N(),{user:t}=b(g),S=V(0),F=L().shape({reason:W().required("Sebäp hökmän girizmeli"),detail:J().trim().required("Bellik, buýruk nomer,senesi hökmän görkezilmeli")});O(()=>{y.getAll().then(()=>{s.value.length>0&&(S.value=s.value[0].id)})});function j(T,{setErrors:i}){const{reason:n,detail:u}=T;return a.create({student:x.params.id,sender:t.value.id,reason:n,detail:u}).then(()=>{c.value&&(c.value==="success"?v("Arza üstünlikli hasaba alyndy","success"):c.value==="error"&&v("Hasaba alma prosesinde ýalňyşlyk ýüze çykdy","error")),c.value=null}).catch(m=>i({apiError:m}))}return(T,i)=>(o(),d(k,null,[e("div",Q,[i[3]||(i[3]=e("h3",{class:"text-xl font-bold mx-2 select-none"},"Talyby okuwdan boşatmak barada arza",-1)),p(r(K),{onSubmit:j,"validation-schema":r(F),class:"space-y-4 my-4"},{default:w(({errors:n,isSubmitting:u})=>[e("div",null,[i[1]||(i[1]=e("label",{for:"region",class:"info-label"},"Okuwdan boşatmak sebäbi",-1)),p(r(D),{as:"select",name:"reason",id:"reason",class:"w-full border border-gray-300 dark:border-gray-700 rounded-md p-2 focus:outline-none select-none",modelValue:S.value,"onUpdate:modelValue":i[0]||(i[0]=m=>S.value=m)},{default:w(()=>[(o(!0),d(k,null,$(r(s),m=>(o(),d("option",{class:"text-gray-600 dark:bg-[#171131ef] dark:text-white select-none",value:m.id},l(m.name),9,X))),256))]),_:1},8,["modelValue"]),e("div",Z,l(n.reason),1)]),e("div",null,[i[2]||(i[2]=e("label",{for:"detail",class:"info-label"},"Okuwdan boşatmak barada (Bellik, buýruk nomer,senesi hökmän görkezilmeli)",-1)),p(r(D),{as:"textarea",rows:"1",name:"detail",type:"text",id:"detail",class:h(["w-full dark:text-gray-300 bg-transparent px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:ring focus:ring-blue-200 focus:outline-none",{"is-invalid":n.detail}])},null,8,["class"]),e("div",ee,l(n.detail),1)]),e("div",ae,[e("button",{disabled:u,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50"},[p(C,{class:h({hidden:!u})},null,8,["class"]),e("span",{class:h({hidden:u})},"Okuwdan boşat",2)],8,te)]),n.apiError?(o(),d("div",se,l(n.apiError),1)):_("",!0)]),_:1},8,["validation-schema"])]),(o(),z(q,{to:"body"},[e("div",le,[p(P,{name:"toast"},{default:w(()=>[(o(!0),d(k,null,$(r(f),n=>(o(),z(Y,{key:n.id,message:n.message,type:n.type,duration:n.duration,onClose:()=>f.value=r(f).filter(u=>u.id!==n.id)},null,8,["message","type","duration","onClose"]))),128))]),_:1})])]))],64))}},oe={class:"tile"},ie={class:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2"},re={class:"info-content"},de={class:"info-content"},ue={class:"info-content"},ce={class:"info-content"},me={class:"info-content"},pe={class:"info-content"},fe={class:"info-content"},ye={class:"info-content"},be={class:"info-content"},ve={class:"info-content"},ge={class:"info-content"},ke={class:"info-content"},he={class:"info-content"},_e={class:"info-content"},xe={class:"info-content"},Se={class:"info-content"},we={key:0},ze={key:1},Te={class:"info-content"},Ee={__name:"StudentInfoView",setup(E){const f=N(),{user:v}=b(f),x=B(),y=A(),{studentInfo:s}=b(y),a=G({fullName:"",highSchool:"",nationality:"",country:"",region:"",specialization:"",department:"",faculty:"",gender:"",familyStatus:"",paymentType:"",birthDate:"",admissionDate:"",registeredPlace:"",studyYear:"",phoneNumber:"",passport:"",militaryService:null,label:null});O(()=>{y.getInfo(x.params.id).then(()=>{if(s.value.active){switch(a.fullName=s.value.full_name,a.nationality=s.value.nationality.name,a.country=s.value.country.name,a.region=s.value.region.name,a.highSchool=s.value.high_school.name,a.faculty=s.value.specialization.faculty_department.high_school_faculty.faculty.name,a.department=s.value.specialization.faculty_department.department.name,a.specialization=`${s.value.specialization.specialization.name} (${s.value.specialization.specialization.degree.name} ${s.value.specialization.specialization.degree.duration} ýyl)`,a.registeredPlace=s.value.registered_place,a.phoneNumber=s.value.phone_number,a.passport=s.value.passport,s.value.gender){case"F":a.gender="Gyz";break;case"M":a.gender="Oglan";break}switch(s.value.payment_type){case"P":a.paymentType="Tölegli";break;case"B":a.paymentType="Býudjet";break}switch(s.value.family_status){case"FR":a.familyStatus="Hossarly";break;case"HO":a.familyStatus="Ýarym ýetim";break;case"CO":a.familyStatus="Doly ýetim";break;case"OE":a.familyStatus="Ýetimler öýünde ösen";break}s.value.label&&(a.label=s.value.label),s.value.military_service&&(a.militaryService=s.value.military_service);let g=new Date(s.value.birth_date);a.birthDate=g.toLocaleDateString();let t=new Date(s.value.admission_date);a.admissionDate=t.toLocaleDateString()}else I.push("/403")})});const c=[{path:"/students",name:"Talyplar"},{path:"/students/view",name:"Görmek",current:!0}];return(g,t)=>(o(),d(k,null,[p(M,{paths:c}),e("div",oe,[t[18]||(t[18]=e("h3",{class:"text-xl font-bold mx-2 select-none"},"Talyp barada maglumat",-1)),e("div",ie,[e("div",null,[t[0]||(t[0]=e("p",{class:"info-label"},"Talybyň ady, familiýasy, atasynyň ady",-1)),e("p",re,l(a.fullName),1)]),e("div",null,[t[1]||(t[1]=e("p",{class:"info-label"},"Doglan senesi",-1)),e("p",de,l(a.birthDate),1)]),e("div",null,[t[2]||(t[2]=e("p",{class:"info-label"},"Jynsy",-1)),e("p",ue,l(a.gender),1)]),e("div",null,[t[3]||(t[3]=e("p",{class:"info-label"},"Milleti",-1)),e("p",ce,l(a.nationality),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"info-label"},"Ýurdy",-1)),e("p",me,l(a.country),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"info-label"},"Ýazgyda duran salgysy",-1)),e("p",pe,l(a.registeredPlace),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"info-label"},"Passport",-1)),e("p",fe,l(a.passport),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"info-label"},"Telefon belgisi",-1)),e("p",ye,l(a.phoneNumber),1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"info-label"},"Welaýaty",-1)),e("p",be,l(a.region),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"info-label"},"Ýokary okuw mekdebi",-1)),e("p",ve,l(a.highSchool),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"info-label"},"Fakulteti",-1)),e("p",ge,l(a.faculty),1)]),e("div",null,[t[11]||(t[11]=e("p",{class:"info-label"},"Kafedrasy",-1)),e("p",ke,l(a.department),1)]),e("div",null,[t[12]||(t[12]=e("p",{class:"info-label"},"Hünäri",-1)),e("p",he,l(a.specialization),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"info-label"},"Okuwa giren senesi",-1)),e("p",_e,l(a.admissionDate),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"info-label"},"Töleg görnüşi",-1)),e("p",xe,l(a.paymentType),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"info-label"},"Maşgala ýagdaýy",-1)),e("p",Se,l(a.familyStatus),1)]),a.gender==="Oglan"?(o(),d("div",we,[t[16]||(t[16]=e("p",{class:"info-label"},"Harby borç",-1)),e("p",{class:h(["info-content",{"text-yellow-500 dark:text-amber-200":!a.militaryService}])},l(a.militaryService?a.militaryService:"Heniz harby borjyny ýerine ýetirmedik"),3)])):_("",!0),a.label?(o(),d("div",ze,[t[17]||(t[17]=e("p",{class:"info-label"},"Bellik",-1)),e("p",Te,l(a.label),1)])):_("",!0)])]),r(v).is_superuser?_("",!0):(o(),z(ne,{key:0}))],64))}};export{Ee as default};
