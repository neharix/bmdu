import{G as j,B as F,s as z,r as u,$ as B,f as a,h,d as s,w as C,g as n,F as v,D as V,j as m,z as $,b as o,t as p,x as D,n as x}from"./index-m5t8ScRE.js";import{_ as N}from"./TheBreadcrumb-BhR2fDCA.js";import{a as R}from"./vee-validate-eju0K1H7.js";import{c as H,b as M}from"./index.esm-CwhLbS5k.js";const T={class:"w-full rounded-lg shadow-lg p-4 bg-white dark:bg-[#171131ef]"},A={class:"mb-4"},G={key:0,class:"text-red-500 text-sm select-none"},I={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},L=["disabled"],O={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},P={key:0,class:"space-y-4"},W={class:"text-red-500 select-none"},Y={__name:"ValidateStudentView",setup(q){const r=j(),f=F(),{createSessionMistakes:b,createSessionStatus:g}=z(f),y=u(0),d=u(null),l=u(null),_=H().shape({high_school:M()}),k=i=>{d.value=i.target.files[0]},S=async i=>{if(d.value!==null){l.value=null;const e=new FormData;return e.append("excel",d.value),f.validate(e).then(()=>{g.value&&$.push("/students")}).catch(t=>{setErrors({apiError:t})})}else l.value="Excel faýlyny hökmän girizmeli"};B(()=>{r.getAll().then(()=>{r.highSchoolsResponse.length!=0&&(y.value=r.highSchoolsResponse[0].id)})});const w=[{path:"/students",name:"Talyplar"},{path:"/students/validate",name:"Walidator"}];return(i,e)=>(o(),a(v,null,[h(N,{paths:w}),s("div",T,[e[3]||(e[3]=s("h3",{class:"text-xl font-bold mx-2 select-none"},"Formany barlamak",-1)),h(n(R),{onSubmit:S,"validation-schema":n(_),class:"space-y-4 my-4"},{default:C(({errors:t,isSubmitting:c,values:J})=>[s("div",null,[s("div",A,[e[1]||(e[1]=s("label",{for:"file",class:"block mb-1 select-none"},"Excel",-1)),s("input",{type:"file",id:"file",name:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:e[0]||(e[0]=E=>k(E)),class:"block w-full px-4 py-2 border-gray-300 dark:border-gray-600text-sm border rounded-md cursor-pointer bg-transparent focus:outline-none dark:placeholder-gray-400"},null,32),l.value?(o(),a("p",G,p(l.value),1)):m("",!0)])]),s("div",I,[s("button",{disabled:c,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50 select-none"},[h(D,{class:x({hidden:!c})},null,8,["class"]),s("span",{class:x({hidden:c})},"Hasaba al",2)],8,L)]),t.apiError?(o(),a("div",O,p(t.apiError),1)):m("",!0)]),_:1},8,["validation-schema"]),n(b).length>0?(o(),a("div",P,[e[2]||(e[2]=s("h3",{class:"text-xl font-bold text-red-500 select-none"},"Üstünlikli ýüklenildi, emma käbir setirlerde näsazlyk ýüze çykdy",-1)),(o(!0),a(v,null,V(n(b),t=>(o(),a("p",W,p(t),1))),256))])):m("",!0)])],64))}};export{Y as default};
